{% load static %}
<article class="bg-white rounded-xl shadow-md overflow-hidden transform hover:scale-[1.02] transition-all duration-300">
    
    <!-- Thumbnail & Badges -->
    <div class="relative">
        <div class="aspect-video relative overflow-hidden"> 
            {% if shop.thumbnail %}
                <img src="{{ shop.thumbnail }}" alt="{{ shop.name }}" class="w-full h-full object-cover">
            {% else %}
                <div class="w-full h-full bg-gray-300 flex items-center justify-center text-gray-500">
                    No Image
                </div>
            {% endif %}
        </div>

        <!-- FEATURED / HOT Badge -->
        <div class="absolute bottom-0 left-0 p-3 flex flex-col space-y-1">
            {% if shop.is_featured %}
                <span class="px-2 py-0.5 rounded-full text-xs font-bold bg-yellow-400 text-gray-900 shadow-lg">
                    FEATURED
                </span>
            {% endif %}
            {% if shop.is_shop_hot %}
                <span class="px-2 py-0.5 rounded-full text-xs font-bold bg-red-600 text-white shadow-lg">
                    ðŸ”¥ HOT
                </span>
            {% endif %}
        </div>

        <!-- Category Badge -->
        <div class="absolute top-3 right-3">
            <span class="px-3 py-1 rounded-full text-xs font-semibold bg-blue-600 text-white shadow-lg">
                {{ shop.get_category_display }}
            </span>
        </div>
    </div>

    <!-- Content -->
    <div class="p-4 sm:p-5">
        <!-- Date & Views -->
        <div class="flex items-center text-xs text-gray-500 mb-3">
            <time datetime="{{ shop.created_at|date:'c' }}">
                {{ shop.created_at|date:"d M Y" }}
            </time>
            <span class="mx-2">â€¢</span>
            <span>{{ shop.product_views }} views</span>
        </div>

        <!-- Product Name -->
        <h3 class="text-xl font-bold text-gray-800 mb-2 line-clamp-2">
            <a href="{% url 'main:show_shop' shop.id %}" class="hover:text-blue-600 transition-colors">
                {{ shop.name }}
            </a>
        </h3>

        <!-- Product Description -->
        <p class="text-gray-600 text-sm line-clamp-3 mb-3">
            {{ shop.description|truncatewords:25 }}
        </p>

        <!-- Price / Discount -->
        <div class="text-lg font-semibold text-gray-800 mb-4">
            {% if shop.is_product_discount %}
                <span class="line-through text-gray-400 mr-2">${{ shop.price }}</span>
                <span class="text-red-600">
                    Rp. {{ shop.price|floatformat:0|add:"-"|add:shop.diskon }}
                </span>
            {% else %}
                Rp. {{ shop.price }}
            {% endif %}
        </div>

        <!-- Action Buttons -->
        <div class="pt-4 border-t border-gray-100 flex items-center {% if user.is_authenticated and shop.user == user %} justify-between {% else %} justify-end {% endif %}">
            <a href="{% url 'main:show_shop' shop.id %}" class="text-sm font-semibold text-blue-600 hover:text-blue-700 transition-colors">
                Lihat Detail â†’
            </a>
            
            {% if user.is_authenticated and shop.user == user %}
                <div class="flex space-x-3 ml-auto">
                    <a href="{% url 'main:edit_shop' shop.id %}" class="bg-gray-100 text-gray-700 hover:bg-gray-200 px-3 py-1 rounded text-sm transition-colors">
                        Edit
                    </a>
                    <a href="{% url 'main:delete_shop' shop.id %}" class="bg-red-500 text-white hover:bg-red-600 px-3 py-1 rounded text-sm transition-colors">
                        Hapus
                    </a>
                </div>
            {% endif %}
        </div>
    </div>
</article>
